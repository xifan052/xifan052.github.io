"use strict";(self.webpackChunkxifan_blog=self.webpackChunkxifan_blog||[]).push([[2609],{9555:(n,s,a)=>{a.r(s),a.d(s,{comp:()=>k,data:()=>v});var e=a(641);const p=(0,e.Fv)('<p>这里很多内容就照搬官网啦 🤪🤪🤪</p><h2 id="一、创建-egg-项目" tabindex="-1"><a class="header-anchor" href="#一、创建-egg-项目"><span>一、创建 egg 项目</span></a></h2><p>创建项目文件夹</p><div class="language-bash line-numbers-mode" data-ext="sh" data-title="sh"><pre class="language-bash"><code> <span class="token function">mkdir</span> egg-example <span class="token operator">&amp;&amp;</span> <span class="token builtin class-name">cd</span> egg-example\n</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><p>使用 egg 提供的模板初始化项目</p><div class="language-bash line-numbers-mode" data-ext="sh" data-title="sh"><pre class="language-bash"><code> <span class="token function">npm</span> init egg <span class="token parameter variable">--type</span><span class="token operator">=</span>simple\n</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><p>下载项目依赖，启动项目</p><div class="language-bash line-numbers-mode" data-ext="sh" data-title="sh"><pre class="language-bash"><code> <span class="token function">npm</span> <span class="token function">install</span>\n <span class="token function">npm</span> run dev\n</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div></div></div><h2 id="二、目录结构" tabindex="-1"><a class="header-anchor" href="#二、目录结构"><span>二、目录结构</span></a></h2>',9),t={href:"https://eggjs.org/zh-cn/basics/structure.html",target:"_blank",rel:"noopener noreferrer"},o=(0,e.Fv)('<ul><li><p><code>app/router.js</code>定义接口，包括接口地址、接口类型；</p></li><li><p><code>app/controller/**</code>解析用户输入，处理返回对应结果；</p></li><li><p><code>app/service/**</code>处理各种增删改查的逻辑，数据库操作、第三方服务调用；</p></li><li><p><code>app/public/**</code>用于放置静态资源；</p></li><li><p><code>config/config.{env}.js</code>用于编写各种配置的文件；</p></li><li><p><code>config/plugin.js</code>用于配置需要加载的插件；</p></li></ul><h2 id="三、egg-中的接口路由" tabindex="-1"><a class="header-anchor" href="#三、egg-中的接口路由"><span>三、egg 中的接口路由</span></a></h2><h3 id="_1-定义路由" tabindex="-1"><a class="header-anchor" href="#_1-定义路由"><span>1.定义路由</span></a></h3><p><code>app/router.js</code>里面定义 URL 路由规则</p><div class="language-javascript line-numbers-mode" data-ext="js" data-title="js"><pre class="language-javascript"><code><span class="token comment">// app/router.js</span>\nmodule<span class="token punctuation">.</span><span class="token function-variable function">exports</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token parameter">app</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>\n  <span class="token keyword">const</span> <span class="token punctuation">{</span> router<span class="token punctuation">,</span> controller <span class="token punctuation">}</span> <span class="token operator">=</span> app\n  router<span class="token punctuation">.</span><span class="token function">get</span><span class="token punctuation">(</span><span class="token string">&#39;/user/:id&#39;</span><span class="token punctuation">,</span> controller<span class="token punctuation">.</span>user<span class="token punctuation">.</span>info<span class="token punctuation">)</span>\n<span class="token punctuation">}</span>\n</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p><code>app/controller</code> 目录下面实现 Controller</p><div class="language-javascript line-numbers-mode" data-ext="js" data-title="js"><pre class="language-javascript"><code><span class="token comment">// app/controller/user.js</span>\n<span class="token keyword">class</span> <span class="token class-name">UserController</span> <span class="token keyword">extends</span> <span class="token class-name">Controller</span> <span class="token punctuation">{</span>\n  <span class="token keyword">async</span> <span class="token function">info</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>\n    <span class="token keyword">const</span> <span class="token punctuation">{</span> ctx <span class="token punctuation">}</span> <span class="token operator">=</span> <span class="token keyword">this</span>\n    ctx<span class="token punctuation">.</span>body <span class="token operator">=</span> <span class="token punctuation">{</span>\n      <span class="token literal-property property">name</span><span class="token operator">:</span> <span class="token template-string"><span class="token template-punctuation string">`</span><span class="token string">hello </span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span>ctx<span class="token punctuation">.</span>params<span class="token punctuation">.</span>id<span class="token interpolation-punctuation punctuation">}</span></span><span class="token template-punctuation string">`</span></span><span class="token punctuation">,</span>\n    <span class="token punctuation">}</span>\n  <span class="token punctuation">}</span>\n<span class="token punctuation">}</span>\n</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>这样就完成了一个最简单的 Router 定义，当用户执行 <code>GET /user/123</code>，<code>user.js</code> 这个里面的 info 方法就会执行。</p><h3 id="_2-获取参数" tabindex="-1"><a class="header-anchor" href="#_2-获取参数"><span>2.获取参数</span></a></h3><p>简单说下路由的参数获取，分为三种：</p><p><strong>2.1.参数命名方式:</strong></p><p>在 router 中通过 <code>:id</code>，接受参数</p><div class="language-javascript line-numbers-mode" data-ext="js" data-title="js"><pre class="language-javascript"><code>router<span class="token punctuation">.</span><span class="token function">get</span><span class="token punctuation">(</span><span class="token string">&#39;/user/findById/:id&#39;</span><span class="token punctuation">,</span> app<span class="token punctuation">.</span>controller<span class="token punctuation">.</span>user<span class="token punctuation">.</span>info<span class="token punctuation">)</span>\n</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><p>在 controller 中，通过<code>params</code>拿参数</p><div class="language-javascript line-numbers-mode" data-ext="js" data-title="js"><pre class="language-javascript"><code><span class="token keyword">async</span> <span class="token function">info</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>\n  <span class="token keyword">const</span> <span class="token punctuation">{</span> ctx <span class="token punctuation">}</span> <span class="token operator">=</span> <span class="token keyword">this</span>\n  ctx<span class="token punctuation">.</span>body <span class="token operator">=</span> ctx<span class="token punctuation">.</span>params<span class="token punctuation">.</span>id\n<span class="token punctuation">}</span>\n\n<span class="token comment">// curl http://127.0.0.1:7001/user/findById/20579</span>\n</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p><strong>2.2.Query String 方式:</strong></p><p><code>router</code> 中无需声明参数，定义接口路径就可以了</p><div class="language-javascript line-numbers-mode" data-ext="js" data-title="js"><pre class="language-javascript"><code>router<span class="token punctuation">.</span><span class="token function">get</span><span class="token punctuation">(</span><span class="token string">&#39;/search&#39;</span><span class="token punctuation">,</span> app<span class="token punctuation">.</span>controller<span class="token punctuation">.</span>search<span class="token punctuation">.</span>index<span class="token punctuation">)</span>\n</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><p>通过<code>query</code>拿参数</p><div class="language-javascript line-numbers-mode" data-ext="js" data-title="js"><pre class="language-javascript"><code><span class="token comment">// app/controller/search.js</span>\n<span class="token keyword">async</span> <span class="token function">index</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>\n  <span class="token keyword">const</span> <span class="token punctuation">{</span> ctx <span class="token punctuation">}</span> <span class="token operator">=</span> <span class="token keyword">this</span>\n  ctx<span class="token punctuation">.</span>body <span class="token operator">=</span> ctx<span class="token punctuation">.</span>query<span class="token punctuation">.</span>name<span class="token punctuation">,</span>\n<span class="token punctuation">}</span>\n\n<span class="token comment">// curl http://127.0.0.1:7001/search?name=egg</span>\n</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p><strong>2.3.表单内容的获取:</strong></p><div class="language-javascript line-numbers-mode" data-ext="js" data-title="js"><pre class="language-javascript"><code>router<span class="token punctuation">.</span><span class="token function">post</span><span class="token punctuation">(</span><span class="token string">&#39;/form&#39;</span><span class="token punctuation">,</span> app<span class="token punctuation">.</span>controller<span class="token punctuation">.</span>form<span class="token punctuation">.</span>add<span class="token punctuation">)</span>\n\n<span class="token comment">// app/controller/form.js</span>\n<span class="token keyword">async</span> <span class="token function">add</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>\n  <span class="token keyword">const</span> <span class="token punctuation">{</span> ctx <span class="token punctuation">}</span> <span class="token operator">=</span> <span class="token keyword">this</span>\n  ctx<span class="token punctuation">.</span>body <span class="token operator">=</span> ctx<span class="token punctuation">.</span>request<span class="token punctuation">.</span>body<span class="token punctuation">,</span>\n<span class="token punctuation">}</span>\n\n<span class="token comment">// 模拟发起 post 请求。</span>\n<span class="token comment">// curl -X POST http://127.0.0.1:7001/form --data &#39;{&quot;name&quot;:&quot;controller&quot;}&#39; --header &#39;Content-Type:application/json&#39;</span>\n</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div>',22),l={href:"https://eggjs.org/zh-cn/basics/router.html",target:"_blank",rel:"noopener noreferrer"},c=(0,e.Fv)('<h2 id="四、数据库操作" tabindex="-1"><a class="header-anchor" href="#四、数据库操作"><span>四、数据库操作</span></a></h2><p>这里以 mysql 为例</p><h3 id="_1-配置数据库" tabindex="-1"><a class="header-anchor" href="#_1-配置数据库"><span>1.配置数据库</span></a></h3><p>终端输入<code>npm i egg-mysql</code>安装<code>egg-mysql</code>;</p><p>在 plugin 中配置</p><div class="language-javascript line-numbers-mode" data-ext="js" data-title="js"><pre class="language-javascript"><code><span class="token comment">// config/plugin.js</span>\nmodule<span class="token punctuation">.</span>exports <span class="token operator">=</span> <span class="token punctuation">{</span>\n  <span class="token literal-property property">mysql</span><span class="token operator">:</span> <span class="token punctuation">{</span>\n    <span class="token literal-property property">enable</span><span class="token operator">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span>\n    <span class="token keyword">package</span><span class="token operator">:</span> <span class="token string">&#39;egg-mysql&#39;</span><span class="token punctuation">,</span>\n  <span class="token punctuation">}</span><span class="token punctuation">,</span>\n<span class="token punctuation">}</span>\n</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>设置数据库连接信息</p><div class="language-javascript line-numbers-mode" data-ext="js" data-title="js"><pre class="language-javascript"><code><span class="token comment">// config/config.default.js</span>\n\nconfig<span class="token punctuation">.</span>mysql <span class="token operator">=</span> <span class="token punctuation">{</span>\n  <span class="token comment">// 单数据库信息配置</span>\n  <span class="token literal-property property">client</span><span class="token operator">:</span> <span class="token punctuation">{</span>\n    <span class="token literal-property property">host</span><span class="token operator">:</span> <span class="token string">&#39;localhost&#39;</span><span class="token punctuation">,</span> <span class="token comment">// host</span>\n    <span class="token literal-property property">port</span><span class="token operator">:</span> <span class="token string">&#39;3306&#39;</span><span class="token punctuation">,</span> <span class="token comment">// 端口号</span>\n    <span class="token literal-property property">user</span><span class="token operator">:</span> <span class="token string">&#39;root&#39;</span><span class="token punctuation">,</span> <span class="token comment">// 用户名</span>\n    <span class="token literal-property property">password</span><span class="token operator">:</span> <span class="token string">&#39;root&#39;</span><span class="token punctuation">,</span> <span class="token comment">// 密码</span>\n    <span class="token literal-property property">database</span><span class="token operator">:</span> <span class="token string">&#39;article&#39;</span><span class="token punctuation">,</span> <span class="token comment">// 数据库名</span>\n  <span class="token punctuation">}</span><span class="token punctuation">,</span>\n  <span class="token literal-property property">app</span><span class="token operator">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span> <span class="token comment">// 是否加载到 app 上，默认开启</span>\n  <span class="token literal-property property">agent</span><span class="token operator">:</span> <span class="token boolean">false</span><span class="token punctuation">,</span> <span class="token comment">// 是否加载到 agent 上，默认关闭</span>\n<span class="token punctuation">}</span>\n<span class="token comment">// 了解更多跳转https://eggjs.org/zh-cn/tutorials/mysql.html#egg-mysql</span>\n</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="_2-数据处理" tabindex="-1"><a class="header-anchor" href="#_2-数据处理"><span>2.数据处理</span></a></h3><ul><li>增加数据</li></ul><div class="language-javascript line-numbers-mode" data-ext="js" data-title="js"><pre class="language-javascript"><code><span class="token keyword">const</span> <span class="token punctuation">{</span> app <span class="token punctuation">}</span> <span class="token operator">=</span> <span class="token keyword">this</span>\n<span class="token keyword">const</span> result <span class="token operator">=</span> <span class="token keyword">await</span> app<span class="token punctuation">.</span>mysql<span class="token punctuation">.</span><span class="token function">insert</span><span class="token punctuation">(</span><span class="token string">&#39;user&#39;</span><span class="token punctuation">,</span> <span class="token punctuation">{</span>\n  <span class="token literal-property property">username</span><span class="token operator">:</span> <span class="token string">&#39;赵四&#39;</span><span class="token punctuation">,</span>\n  <span class="token literal-property property">password</span><span class="token operator">:</span> <span class="token string">&#39;223423&#39;</span><span class="token punctuation">,</span>\n<span class="token punctuation">}</span><span class="token punctuation">)</span>\n</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><ul><li>删除数据</li></ul><div class="language-javascript line-numbers-mode" data-ext="js" data-title="js"><pre class="language-javascript"><code><span class="token keyword">const</span> <span class="token punctuation">{</span> app <span class="token punctuation">}</span> <span class="token operator">=</span> <span class="token keyword">this</span>\n<span class="token keyword">const</span> result <span class="token operator">=</span> <span class="token keyword">await</span> app<span class="token punctuation">.</span>mysql<span class="token punctuation">.</span><span class="token function">delete</span><span class="token punctuation">(</span><span class="token string">&#39;user&#39;</span><span class="token punctuation">,</span> <span class="token punctuation">{</span> <span class="token literal-property property">id</span><span class="token operator">:</span> <span class="token number">4</span> <span class="token punctuation">}</span><span class="token punctuation">)</span>\n</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div></div></div><ul><li>修改数据</li></ul><div class="language-javascript line-numbers-mode" data-ext="js" data-title="js"><pre class="language-javascript"><code><span class="token comment">// 第一种方式:根据主键修改</span>\n\n<span class="token keyword">const</span> row <span class="token operator">=</span> <span class="token punctuation">{</span> <span class="token literal-property property">id</span><span class="token operator">:</span> <span class="token number">7</span><span class="token punctuation">,</span> <span class="token literal-property property">username</span><span class="token operator">:</span> <span class="token string">&#39;赵四&#39;</span> <span class="token punctuation">}</span>\n<span class="token keyword">const</span> result <span class="token operator">=</span> <span class="token keyword">await</span> <span class="token keyword">this</span><span class="token punctuation">.</span>app<span class="token punctuation">.</span>mysql<span class="token punctuation">.</span><span class="token function">update</span><span class="token punctuation">(</span><span class="token string">&#39;user&#39;</span><span class="token punctuation">,</span> row<span class="token punctuation">)</span>\n<span class="token comment">// 第二种方式:通过 sql 来修改数据</span>\n<span class="token keyword">const</span> results <span class="token operator">=</span> <span class="token keyword">await</span> <span class="token keyword">this</span><span class="token punctuation">.</span>app<span class="token punctuation">.</span>mysql<span class="token punctuation">.</span><span class="token function">query</span><span class="token punctuation">(</span>\n  <span class="token string">&#39;update user set username = ? where id = ?&#39;</span><span class="token punctuation">,</span>\n  <span class="token punctuation">[</span><span class="token number">6666</span><span class="token punctuation">,</span> <span class="token number">8</span><span class="token punctuation">]</span>\n<span class="token punctuation">)</span>\n</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><ul><li>查询数据</li></ul><div class="language-javascript line-numbers-mode" data-ext="js" data-title="js"><pre class="language-javascript"><code><span class="token keyword">const</span> <span class="token punctuation">{</span> app <span class="token punctuation">}</span> <span class="token operator">=</span> <span class="token keyword">this</span>\n<span class="token comment">// 第一种方式</span>\n<span class="token keyword">const</span> result <span class="token operator">=</span> <span class="token keyword">await</span> app<span class="token punctuation">.</span>mysql<span class="token punctuation">.</span><span class="token function">get</span><span class="token punctuation">(</span><span class="token string">&#39;user&#39;</span><span class="token punctuation">,</span> <span class="token punctuation">{</span> <span class="token literal-property property">id</span><span class="token operator">:</span> <span class="token number">2</span> <span class="token punctuation">}</span><span class="token punctuation">)</span>\n<span class="token comment">//  第二种方式</span>\n<span class="token keyword">const</span> result <span class="token operator">=</span> <span class="token keyword">await</span> app<span class="token punctuation">.</span>mysql<span class="token punctuation">.</span><span class="token function">select</span><span class="token punctuation">(</span><span class="token string">&#39;user&#39;</span><span class="token punctuation">,</span> <span class="token punctuation">{</span>\n  <span class="token literal-property property">where</span><span class="token operator">:</span> <span class="token punctuation">{</span> <span class="token literal-property property">id</span><span class="token operator">:</span> <span class="token string">&#39;3&#39;</span> <span class="token punctuation">}</span><span class="token punctuation">,</span> <span class="token comment">// 查询条件</span>\n  <span class="token comment">// orders: [[&#39;created_at&#39;,&#39;desc&#39;], [&#39;id&#39;,&#39;desc&#39;]], // 排序</span>\n  <span class="token literal-property property">limit</span><span class="token operator">:</span> <span class="token number">10</span><span class="token punctuation">,</span> <span class="token comment">// 每页条数</span>\n  <span class="token literal-property property">offset</span><span class="token operator">:</span> <span class="token number">0</span><span class="token punctuation">,</span> <span class="token comment">// 页数</span>\n<span class="token punctuation">}</span><span class="token punctuation">)</span>\n</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div>',17),i={href:"https://eggjs.org/zh-cn/tutorials/mysql.html#%E5%A6%82%E4%BD%95%E7%BC%96%E5%86%99-crud-%E8%AF%AD%E5%8F%A5",target:"_blank",rel:"noopener noreferrer"},r={href:"https://www.cnblogs.com/loaderman/p/11571028.html",target:"_blank",rel:"noopener noreferrer"},u=(0,e.Fv)('<h2 id="五、egg-模板渲染" tabindex="-1"><a class="header-anchor" href="#五、egg-模板渲染"><span>五、egg 模板渲染</span></a></h2><p>终端输入<code>npm i egg-view-ejs</code>安装<code>egg-view-ejs</code>;</p><p>配置 plugin</p><div class="language-javascript line-numbers-mode" data-ext="js" data-title="js"><pre class="language-javascript"><code><span class="token comment">// config/plugin.js</span>\nmodule<span class="token punctuation">.</span>exports <span class="token operator">=</span> <span class="token punctuation">{</span>\n  <span class="token literal-property property">ejs</span><span class="token operator">:</span> <span class="token punctuation">{</span>\n    <span class="token literal-property property">enable</span><span class="token operator">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span>\n    <span class="token keyword">package</span><span class="token operator">:</span> <span class="token string">&#39;egg-view-ejs&#39;</span><span class="token punctuation">,</span>\n  <span class="token punctuation">}</span><span class="token punctuation">,</span>\n<span class="token punctuation">}</span>\n</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>设置 html 文件以 ejs 解析</p><div class="language-javascript line-numbers-mode" data-ext="js" data-title="js"><pre class="language-javascript"><code><span class="token comment">// config/config.default.js</span>\n\nconfig<span class="token punctuation">.</span>view <span class="token operator">=</span> <span class="token punctuation">{</span>\n  <span class="token literal-property property">mapping</span><span class="token operator">:</span> <span class="token punctuation">{</span>\n    <span class="token string-property property">&#39;.html&#39;</span><span class="token operator">:</span> <span class="token string">&#39;ejs&#39;</span><span class="token punctuation">,</span>\n  <span class="token punctuation">}</span><span class="token punctuation">,</span>\n<span class="token punctuation">}</span>\n</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>指定解析的 html 文件，返回接口数据</p><div class="language-javascript line-numbers-mode" data-ext="js" data-title="js"><pre class="language-javascript"><code><span class="token comment">// app/controller/home.js</span>\n<span class="token keyword">const</span> Controller <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">&#39;egg&#39;</span><span class="token punctuation">)</span><span class="token punctuation">.</span>Controller\n\n<span class="token keyword">class</span> <span class="token class-name">HomeController</span> <span class="token keyword">extends</span> <span class="token class-name">Controller</span> <span class="token punctuation">{</span>\n  <span class="token keyword">async</span> <span class="token function">index</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>\n    <span class="token keyword">const</span> <span class="token punctuation">{</span> ctx <span class="token punctuation">}</span> <span class="token operator">=</span> <span class="token keyword">this</span>\n    <span class="token keyword">const</span> res <span class="token operator">=</span> <span class="token punctuation">{</span>\n      <span class="token literal-property property">id</span><span class="token operator">:</span> <span class="token number">1559</span><span class="token punctuation">,</span>\n      <span class="token literal-property property">name</span><span class="token operator">:</span> <span class="token string">&#39;tom&#39;</span><span class="token punctuation">,</span>\n      <span class="token literal-property property">age</span><span class="token operator">:</span> <span class="token number">18</span><span class="token punctuation">,</span>\n    <span class="token punctuation">}</span>\n    <span class="token keyword">await</span> ctx<span class="token punctuation">.</span><span class="token function">render</span><span class="token punctuation">(</span><span class="token string">&#39;index.html&#39;</span><span class="token punctuation">,</span> <span class="token punctuation">{</span>\n      res<span class="token punctuation">,</span>\n      <span class="token literal-property property">list</span><span class="token operator">:</span> <span class="token punctuation">[</span><span class="token string">&#39;a&#39;</span><span class="token punctuation">,</span> <span class="token string">&#39;b&#39;</span><span class="token punctuation">,</span> <span class="token string">&#39;c&#39;</span><span class="token punctuation">]</span><span class="token punctuation">,</span>\n    <span class="token punctuation">}</span><span class="token punctuation">)</span>\n  <span class="token punctuation">}</span>\n<span class="token punctuation">}</span>\n\nmodule<span class="token punctuation">.</span>exports <span class="token operator">=</span> HomeController\n</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>html 获取数据，渲染页面</p><div class="language-javascript line-numbers-mode" data-ext="js" data-title="js"><pre class="language-javascript"><code><span class="token comment">// app/view/index.html</span>\n<span class="token operator">&lt;</span>p<span class="token operator">&gt;</span>\n  <span class="token literal-property property">id</span><span class="token operator">:</span><span class="token operator">&lt;</span><span class="token operator">%=</span>res<span class="token punctuation">.</span>id<span class="token operator">%</span><span class="token operator">&gt;</span>\n<span class="token operator">&lt;</span><span class="token operator">/</span>p<span class="token operator">&gt;</span>\n<span class="token operator">&lt;</span>ul<span class="token operator">&gt;</span>\n  <span class="token operator">&lt;</span><span class="token operator">%</span><span class="token keyword">for</span><span class="token punctuation">(</span><span class="token keyword">var</span> i<span class="token operator">=</span><span class="token number">0</span><span class="token punctuation">;</span> i<span class="token operator">&lt;</span>list<span class="token punctuation">.</span>length<span class="token punctuation">;</span>i<span class="token operator">++</span><span class="token punctuation">)</span><span class="token punctuation">{</span><span class="token operator">%</span><span class="token operator">&gt;</span>\n    <span class="token operator">&lt;</span>li<span class="token operator">&gt;</span>\n      <span class="token operator">&lt;</span><span class="token operator">%=</span>list<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token operator">%</span><span class="token operator">&gt;</span>\n    <span class="token operator">&lt;</span><span class="token operator">/</span>li<span class="token operator">&gt;</span>\n  <span class="token operator">&lt;</span><span class="token operator">%</span><span class="token punctuation">}</span><span class="token operator">%</span><span class="token operator">&gt;</span>\n<span class="token operator">&lt;</span><span class="token operator">/</span>ul<span class="token operator">&gt;</span>\n</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div>',10),d={},k=(0,a(6262).A)(d,[["render",function(n,s){const a=(0,e.g2)("ExternalLinkIcon");return(0,e.uX)(),(0,e.CE)("div",null,[p,(0,e.Lk)("p",null,[(0,e.eW)("这里就只说下常用的目录，点击"),(0,e.Lk)("a",t,[(0,e.eW)("链接"),(0,e.bF)(a)]),(0,e.eW)("了解更多")]),o,(0,e.Lk)("p",null,[(0,e.eW)("更多路由知识跳转"),(0,e.Lk)("a",l,[(0,e.eW)("官网"),(0,e.bF)(a)])]),c,(0,e.Lk)("p",null,[(0,e.Lk)("a",i,[(0,e.eW)("官网传送门"),(0,e.bF)(a)]),(0,e.Lk)("a",r,[(0,e.eW)("博客园传送门"),(0,e.bF)(a)])]),u])}]]),v=JSON.parse('{"path":"/blogs/note/backend/eggrumenshouce.html","title":"egg入门手册","lang":"en-US","frontmatter":{"title":"egg入门手册","categories":["note"],"tags":["Egg"],"date":"2020-12-16T00:00:00.000Z"},"headers":[{"level":2,"title":"一、创建 egg 项目","slug":"一、创建-egg-项目","link":"#一、创建-egg-项目","children":[]},{"level":2,"title":"二、目录结构","slug":"二、目录结构","link":"#二、目录结构","children":[]},{"level":2,"title":"三、egg 中的接口路由","slug":"三、egg-中的接口路由","link":"#三、egg-中的接口路由","children":[{"level":3,"title":"1.定义路由","slug":"_1-定义路由","link":"#_1-定义路由","children":[]},{"level":3,"title":"2.获取参数","slug":"_2-获取参数","link":"#_2-获取参数","children":[]}]},{"level":2,"title":"四、数据库操作","slug":"四、数据库操作","link":"#四、数据库操作","children":[{"level":3,"title":"1.配置数据库","slug":"_1-配置数据库","link":"#_1-配置数据库","children":[]},{"level":3,"title":"2.数据处理","slug":"_2-数据处理","link":"#_2-数据处理","children":[]}]},{"level":2,"title":"五、egg 模板渲染","slug":"五、egg-模板渲染","link":"#五、egg-模板渲染","children":[]}],"git":{"createdTime":1737108179000,"updatedTime":1737108179000,"contributors":[{"name":"稀饭","email":"lixifan@ane56.com","commits":1}]},"filePathRelative":"blogs/note/backend/egg入门手册.md"}')}}]);