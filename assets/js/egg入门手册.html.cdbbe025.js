"use strict";(self.webpackChunkxifan_blog=self.webpackChunkxifan_blog||[]).push([[2609],{9555:(n,s,a)=>{a.r(s),a.d(s,{comp:()=>k,data:()=>v});var e=a(641);const p=(0,e.Fv)('<p>è¿™é‡Œå¾ˆå¤šå†…å®¹å°±ç…§æ¬å®˜ç½‘å•¦ ğŸ¤ªğŸ¤ªğŸ¤ª</p><h2 id="ä¸€ã€åˆ›å»º-egg-é¡¹ç›®" tabindex="-1"><a class="header-anchor" href="#ä¸€ã€åˆ›å»º-egg-é¡¹ç›®"><span>ä¸€ã€åˆ›å»º egg é¡¹ç›®</span></a></h2><p>åˆ›å»ºé¡¹ç›®æ–‡ä»¶å¤¹</p><div class="language-bash line-numbers-mode" data-ext="sh" data-title="sh"><pre class="language-bash"><code> <span class="token function">mkdir</span> egg-example <span class="token operator">&amp;&amp;</span> <span class="token builtin class-name">cd</span> egg-example\n</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><p>ä½¿ç”¨ egg æä¾›çš„æ¨¡æ¿åˆå§‹åŒ–é¡¹ç›®</p><div class="language-bash line-numbers-mode" data-ext="sh" data-title="sh"><pre class="language-bash"><code> <span class="token function">npm</span> init egg <span class="token parameter variable">--type</span><span class="token operator">=</span>simple\n</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><p>ä¸‹è½½é¡¹ç›®ä¾èµ–ï¼Œå¯åŠ¨é¡¹ç›®</p><div class="language-bash line-numbers-mode" data-ext="sh" data-title="sh"><pre class="language-bash"><code> <span class="token function">npm</span> <span class="token function">install</span>\n <span class="token function">npm</span> run dev\n</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div></div></div><h2 id="äºŒã€ç›®å½•ç»“æ„" tabindex="-1"><a class="header-anchor" href="#äºŒã€ç›®å½•ç»“æ„"><span>äºŒã€ç›®å½•ç»“æ„</span></a></h2>',9),t={href:"https://eggjs.org/zh-cn/basics/structure.html",target:"_blank",rel:"noopener noreferrer"},o=(0,e.Fv)('<ul><li><p><code>app/router.js</code>å®šä¹‰æ¥å£ï¼ŒåŒ…æ‹¬æ¥å£åœ°å€ã€æ¥å£ç±»å‹ï¼›</p></li><li><p><code>app/controller/**</code>è§£æç”¨æˆ·è¾“å…¥ï¼Œå¤„ç†è¿”å›å¯¹åº”ç»“æœï¼›</p></li><li><p><code>app/service/**</code>å¤„ç†å„ç§å¢åˆ æ”¹æŸ¥çš„é€»è¾‘ï¼Œæ•°æ®åº“æ“ä½œã€ç¬¬ä¸‰æ–¹æœåŠ¡è°ƒç”¨ï¼›</p></li><li><p><code>app/public/**</code>ç”¨äºæ”¾ç½®é™æ€èµ„æºï¼›</p></li><li><p><code>config/config.{env}.js</code>ç”¨äºç¼–å†™å„ç§é…ç½®çš„æ–‡ä»¶ï¼›</p></li><li><p><code>config/plugin.js</code>ç”¨äºé…ç½®éœ€è¦åŠ è½½çš„æ’ä»¶ï¼›</p></li></ul><h2 id="ä¸‰ã€egg-ä¸­çš„æ¥å£è·¯ç”±" tabindex="-1"><a class="header-anchor" href="#ä¸‰ã€egg-ä¸­çš„æ¥å£è·¯ç”±"><span>ä¸‰ã€egg ä¸­çš„æ¥å£è·¯ç”±</span></a></h2><h3 id="_1-å®šä¹‰è·¯ç”±" tabindex="-1"><a class="header-anchor" href="#_1-å®šä¹‰è·¯ç”±"><span>1.å®šä¹‰è·¯ç”±</span></a></h3><p><code>app/router.js</code>é‡Œé¢å®šä¹‰ URL è·¯ç”±è§„åˆ™</p><div class="language-javascript line-numbers-mode" data-ext="js" data-title="js"><pre class="language-javascript"><code><span class="token comment">// app/router.js</span>\nmodule<span class="token punctuation">.</span><span class="token function-variable function">exports</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token parameter">app</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>\n  <span class="token keyword">const</span> <span class="token punctuation">{</span> router<span class="token punctuation">,</span> controller <span class="token punctuation">}</span> <span class="token operator">=</span> app\n  router<span class="token punctuation">.</span><span class="token function">get</span><span class="token punctuation">(</span><span class="token string">&#39;/user/:id&#39;</span><span class="token punctuation">,</span> controller<span class="token punctuation">.</span>user<span class="token punctuation">.</span>info<span class="token punctuation">)</span>\n<span class="token punctuation">}</span>\n</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p><code>app/controller</code> ç›®å½•ä¸‹é¢å®ç° Controller</p><div class="language-javascript line-numbers-mode" data-ext="js" data-title="js"><pre class="language-javascript"><code><span class="token comment">// app/controller/user.js</span>\n<span class="token keyword">class</span> <span class="token class-name">UserController</span> <span class="token keyword">extends</span> <span class="token class-name">Controller</span> <span class="token punctuation">{</span>\n  <span class="token keyword">async</span> <span class="token function">info</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>\n    <span class="token keyword">const</span> <span class="token punctuation">{</span> ctx <span class="token punctuation">}</span> <span class="token operator">=</span> <span class="token keyword">this</span>\n    ctx<span class="token punctuation">.</span>body <span class="token operator">=</span> <span class="token punctuation">{</span>\n      <span class="token literal-property property">name</span><span class="token operator">:</span> <span class="token template-string"><span class="token template-punctuation string">`</span><span class="token string">hello </span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span>ctx<span class="token punctuation">.</span>params<span class="token punctuation">.</span>id<span class="token interpolation-punctuation punctuation">}</span></span><span class="token template-punctuation string">`</span></span><span class="token punctuation">,</span>\n    <span class="token punctuation">}</span>\n  <span class="token punctuation">}</span>\n<span class="token punctuation">}</span>\n</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>è¿™æ ·å°±å®Œæˆäº†ä¸€ä¸ªæœ€ç®€å•çš„ Router å®šä¹‰ï¼Œå½“ç”¨æˆ·æ‰§è¡Œ <code>GET /user/123</code>ï¼Œ<code>user.js</code> è¿™ä¸ªé‡Œé¢çš„ info æ–¹æ³•å°±ä¼šæ‰§è¡Œã€‚</p><h3 id="_2-è·å–å‚æ•°" tabindex="-1"><a class="header-anchor" href="#_2-è·å–å‚æ•°"><span>2.è·å–å‚æ•°</span></a></h3><p>ç®€å•è¯´ä¸‹è·¯ç”±çš„å‚æ•°è·å–ï¼Œåˆ†ä¸ºä¸‰ç§ï¼š</p><p><strong>2.1.å‚æ•°å‘½åæ–¹å¼:</strong></p><p>åœ¨ router ä¸­é€šè¿‡ <code>:id</code>ï¼Œæ¥å—å‚æ•°</p><div class="language-javascript line-numbers-mode" data-ext="js" data-title="js"><pre class="language-javascript"><code>router<span class="token punctuation">.</span><span class="token function">get</span><span class="token punctuation">(</span><span class="token string">&#39;/user/findById/:id&#39;</span><span class="token punctuation">,</span> app<span class="token punctuation">.</span>controller<span class="token punctuation">.</span>user<span class="token punctuation">.</span>info<span class="token punctuation">)</span>\n</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><p>åœ¨ controller ä¸­ï¼Œé€šè¿‡<code>params</code>æ‹¿å‚æ•°</p><div class="language-javascript line-numbers-mode" data-ext="js" data-title="js"><pre class="language-javascript"><code><span class="token keyword">async</span> <span class="token function">info</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>\n  <span class="token keyword">const</span> <span class="token punctuation">{</span> ctx <span class="token punctuation">}</span> <span class="token operator">=</span> <span class="token keyword">this</span>\n  ctx<span class="token punctuation">.</span>body <span class="token operator">=</span> ctx<span class="token punctuation">.</span>params<span class="token punctuation">.</span>id\n<span class="token punctuation">}</span>\n\n<span class="token comment">// curl http://127.0.0.1:7001/user/findById/20579</span>\n</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p><strong>2.2.Query String æ–¹å¼:</strong></p><p><code>router</code> ä¸­æ— éœ€å£°æ˜å‚æ•°ï¼Œå®šä¹‰æ¥å£è·¯å¾„å°±å¯ä»¥äº†</p><div class="language-javascript line-numbers-mode" data-ext="js" data-title="js"><pre class="language-javascript"><code>router<span class="token punctuation">.</span><span class="token function">get</span><span class="token punctuation">(</span><span class="token string">&#39;/search&#39;</span><span class="token punctuation">,</span> app<span class="token punctuation">.</span>controller<span class="token punctuation">.</span>search<span class="token punctuation">.</span>index<span class="token punctuation">)</span>\n</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><p>é€šè¿‡<code>query</code>æ‹¿å‚æ•°</p><div class="language-javascript line-numbers-mode" data-ext="js" data-title="js"><pre class="language-javascript"><code><span class="token comment">// app/controller/search.js</span>\n<span class="token keyword">async</span> <span class="token function">index</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>\n  <span class="token keyword">const</span> <span class="token punctuation">{</span> ctx <span class="token punctuation">}</span> <span class="token operator">=</span> <span class="token keyword">this</span>\n  ctx<span class="token punctuation">.</span>body <span class="token operator">=</span> ctx<span class="token punctuation">.</span>query<span class="token punctuation">.</span>name<span class="token punctuation">,</span>\n<span class="token punctuation">}</span>\n\n<span class="token comment">// curl http://127.0.0.1:7001/search?name=egg</span>\n</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p><strong>2.3.è¡¨å•å†…å®¹çš„è·å–:</strong></p><div class="language-javascript line-numbers-mode" data-ext="js" data-title="js"><pre class="language-javascript"><code>router<span class="token punctuation">.</span><span class="token function">post</span><span class="token punctuation">(</span><span class="token string">&#39;/form&#39;</span><span class="token punctuation">,</span> app<span class="token punctuation">.</span>controller<span class="token punctuation">.</span>form<span class="token punctuation">.</span>add<span class="token punctuation">)</span>\n\n<span class="token comment">// app/controller/form.js</span>\n<span class="token keyword">async</span> <span class="token function">add</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>\n  <span class="token keyword">const</span> <span class="token punctuation">{</span> ctx <span class="token punctuation">}</span> <span class="token operator">=</span> <span class="token keyword">this</span>\n  ctx<span class="token punctuation">.</span>body <span class="token operator">=</span> ctx<span class="token punctuation">.</span>request<span class="token punctuation">.</span>body<span class="token punctuation">,</span>\n<span class="token punctuation">}</span>\n\n<span class="token comment">// æ¨¡æ‹Ÿå‘èµ· post è¯·æ±‚ã€‚</span>\n<span class="token comment">// curl -X POST http://127.0.0.1:7001/form --data &#39;{&quot;name&quot;:&quot;controller&quot;}&#39; --header &#39;Content-Type:application/json&#39;</span>\n</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div>',22),l={href:"https://eggjs.org/zh-cn/basics/router.html",target:"_blank",rel:"noopener noreferrer"},c=(0,e.Fv)('<h2 id="å››ã€æ•°æ®åº“æ“ä½œ" tabindex="-1"><a class="header-anchor" href="#å››ã€æ•°æ®åº“æ“ä½œ"><span>å››ã€æ•°æ®åº“æ“ä½œ</span></a></h2><p>è¿™é‡Œä»¥ mysql ä¸ºä¾‹</p><h3 id="_1-é…ç½®æ•°æ®åº“" tabindex="-1"><a class="header-anchor" href="#_1-é…ç½®æ•°æ®åº“"><span>1.é…ç½®æ•°æ®åº“</span></a></h3><p>ç»ˆç«¯è¾“å…¥<code>npm i egg-mysql</code>å®‰è£…<code>egg-mysql</code>;</p><p>åœ¨ plugin ä¸­é…ç½®</p><div class="language-javascript line-numbers-mode" data-ext="js" data-title="js"><pre class="language-javascript"><code><span class="token comment">// config/plugin.js</span>\nmodule<span class="token punctuation">.</span>exports <span class="token operator">=</span> <span class="token punctuation">{</span>\n  <span class="token literal-property property">mysql</span><span class="token operator">:</span> <span class="token punctuation">{</span>\n    <span class="token literal-property property">enable</span><span class="token operator">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span>\n    <span class="token keyword">package</span><span class="token operator">:</span> <span class="token string">&#39;egg-mysql&#39;</span><span class="token punctuation">,</span>\n  <span class="token punctuation">}</span><span class="token punctuation">,</span>\n<span class="token punctuation">}</span>\n</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>è®¾ç½®æ•°æ®åº“è¿æ¥ä¿¡æ¯</p><div class="language-javascript line-numbers-mode" data-ext="js" data-title="js"><pre class="language-javascript"><code><span class="token comment">// config/config.default.js</span>\n\nconfig<span class="token punctuation">.</span>mysql <span class="token operator">=</span> <span class="token punctuation">{</span>\n  <span class="token comment">// å•æ•°æ®åº“ä¿¡æ¯é…ç½®</span>\n  <span class="token literal-property property">client</span><span class="token operator">:</span> <span class="token punctuation">{</span>\n    <span class="token literal-property property">host</span><span class="token operator">:</span> <span class="token string">&#39;localhost&#39;</span><span class="token punctuation">,</span> <span class="token comment">// host</span>\n    <span class="token literal-property property">port</span><span class="token operator">:</span> <span class="token string">&#39;3306&#39;</span><span class="token punctuation">,</span> <span class="token comment">// ç«¯å£å·</span>\n    <span class="token literal-property property">user</span><span class="token operator">:</span> <span class="token string">&#39;root&#39;</span><span class="token punctuation">,</span> <span class="token comment">// ç”¨æˆ·å</span>\n    <span class="token literal-property property">password</span><span class="token operator">:</span> <span class="token string">&#39;root&#39;</span><span class="token punctuation">,</span> <span class="token comment">// å¯†ç </span>\n    <span class="token literal-property property">database</span><span class="token operator">:</span> <span class="token string">&#39;article&#39;</span><span class="token punctuation">,</span> <span class="token comment">// æ•°æ®åº“å</span>\n  <span class="token punctuation">}</span><span class="token punctuation">,</span>\n  <span class="token literal-property property">app</span><span class="token operator">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span> <span class="token comment">// æ˜¯å¦åŠ è½½åˆ° app ä¸Šï¼Œé»˜è®¤å¼€å¯</span>\n  <span class="token literal-property property">agent</span><span class="token operator">:</span> <span class="token boolean">false</span><span class="token punctuation">,</span> <span class="token comment">// æ˜¯å¦åŠ è½½åˆ° agent ä¸Šï¼Œé»˜è®¤å…³é—­</span>\n<span class="token punctuation">}</span>\n<span class="token comment">// äº†è§£æ›´å¤šè·³è½¬https://eggjs.org/zh-cn/tutorials/mysql.html#egg-mysql</span>\n</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="_2-æ•°æ®å¤„ç†" tabindex="-1"><a class="header-anchor" href="#_2-æ•°æ®å¤„ç†"><span>2.æ•°æ®å¤„ç†</span></a></h3><ul><li>å¢åŠ æ•°æ®</li></ul><div class="language-javascript line-numbers-mode" data-ext="js" data-title="js"><pre class="language-javascript"><code><span class="token keyword">const</span> <span class="token punctuation">{</span> app <span class="token punctuation">}</span> <span class="token operator">=</span> <span class="token keyword">this</span>\n<span class="token keyword">const</span> result <span class="token operator">=</span> <span class="token keyword">await</span> app<span class="token punctuation">.</span>mysql<span class="token punctuation">.</span><span class="token function">insert</span><span class="token punctuation">(</span><span class="token string">&#39;user&#39;</span><span class="token punctuation">,</span> <span class="token punctuation">{</span>\n  <span class="token literal-property property">username</span><span class="token operator">:</span> <span class="token string">&#39;èµµå››&#39;</span><span class="token punctuation">,</span>\n  <span class="token literal-property property">password</span><span class="token operator">:</span> <span class="token string">&#39;223423&#39;</span><span class="token punctuation">,</span>\n<span class="token punctuation">}</span><span class="token punctuation">)</span>\n</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><ul><li>åˆ é™¤æ•°æ®</li></ul><div class="language-javascript line-numbers-mode" data-ext="js" data-title="js"><pre class="language-javascript"><code><span class="token keyword">const</span> <span class="token punctuation">{</span> app <span class="token punctuation">}</span> <span class="token operator">=</span> <span class="token keyword">this</span>\n<span class="token keyword">const</span> result <span class="token operator">=</span> <span class="token keyword">await</span> app<span class="token punctuation">.</span>mysql<span class="token punctuation">.</span><span class="token function">delete</span><span class="token punctuation">(</span><span class="token string">&#39;user&#39;</span><span class="token punctuation">,</span> <span class="token punctuation">{</span> <span class="token literal-property property">id</span><span class="token operator">:</span> <span class="token number">4</span> <span class="token punctuation">}</span><span class="token punctuation">)</span>\n</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div></div></div><ul><li>ä¿®æ”¹æ•°æ®</li></ul><div class="language-javascript line-numbers-mode" data-ext="js" data-title="js"><pre class="language-javascript"><code><span class="token comment">// ç¬¬ä¸€ç§æ–¹å¼:æ ¹æ®ä¸»é”®ä¿®æ”¹</span>\n\n<span class="token keyword">const</span> row <span class="token operator">=</span> <span class="token punctuation">{</span> <span class="token literal-property property">id</span><span class="token operator">:</span> <span class="token number">7</span><span class="token punctuation">,</span> <span class="token literal-property property">username</span><span class="token operator">:</span> <span class="token string">&#39;èµµå››&#39;</span> <span class="token punctuation">}</span>\n<span class="token keyword">const</span> result <span class="token operator">=</span> <span class="token keyword">await</span> <span class="token keyword">this</span><span class="token punctuation">.</span>app<span class="token punctuation">.</span>mysql<span class="token punctuation">.</span><span class="token function">update</span><span class="token punctuation">(</span><span class="token string">&#39;user&#39;</span><span class="token punctuation">,</span> row<span class="token punctuation">)</span>\n<span class="token comment">// ç¬¬äºŒç§æ–¹å¼:é€šè¿‡ sql æ¥ä¿®æ”¹æ•°æ®</span>\n<span class="token keyword">const</span> results <span class="token operator">=</span> <span class="token keyword">await</span> <span class="token keyword">this</span><span class="token punctuation">.</span>app<span class="token punctuation">.</span>mysql<span class="token punctuation">.</span><span class="token function">query</span><span class="token punctuation">(</span>\n  <span class="token string">&#39;update user set username = ? where id = ?&#39;</span><span class="token punctuation">,</span>\n  <span class="token punctuation">[</span><span class="token number">6666</span><span class="token punctuation">,</span> <span class="token number">8</span><span class="token punctuation">]</span>\n<span class="token punctuation">)</span>\n</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><ul><li>æŸ¥è¯¢æ•°æ®</li></ul><div class="language-javascript line-numbers-mode" data-ext="js" data-title="js"><pre class="language-javascript"><code><span class="token keyword">const</span> <span class="token punctuation">{</span> app <span class="token punctuation">}</span> <span class="token operator">=</span> <span class="token keyword">this</span>\n<span class="token comment">// ç¬¬ä¸€ç§æ–¹å¼</span>\n<span class="token keyword">const</span> result <span class="token operator">=</span> <span class="token keyword">await</span> app<span class="token punctuation">.</span>mysql<span class="token punctuation">.</span><span class="token function">get</span><span class="token punctuation">(</span><span class="token string">&#39;user&#39;</span><span class="token punctuation">,</span> <span class="token punctuation">{</span> <span class="token literal-property property">id</span><span class="token operator">:</span> <span class="token number">2</span> <span class="token punctuation">}</span><span class="token punctuation">)</span>\n<span class="token comment">//  ç¬¬äºŒç§æ–¹å¼</span>\n<span class="token keyword">const</span> result <span class="token operator">=</span> <span class="token keyword">await</span> app<span class="token punctuation">.</span>mysql<span class="token punctuation">.</span><span class="token function">select</span><span class="token punctuation">(</span><span class="token string">&#39;user&#39;</span><span class="token punctuation">,</span> <span class="token punctuation">{</span>\n  <span class="token literal-property property">where</span><span class="token operator">:</span> <span class="token punctuation">{</span> <span class="token literal-property property">id</span><span class="token operator">:</span> <span class="token string">&#39;3&#39;</span> <span class="token punctuation">}</span><span class="token punctuation">,</span> <span class="token comment">// æŸ¥è¯¢æ¡ä»¶</span>\n  <span class="token comment">// orders: [[&#39;created_at&#39;,&#39;desc&#39;], [&#39;id&#39;,&#39;desc&#39;]], // æ’åº</span>\n  <span class="token literal-property property">limit</span><span class="token operator">:</span> <span class="token number">10</span><span class="token punctuation">,</span> <span class="token comment">// æ¯é¡µæ¡æ•°</span>\n  <span class="token literal-property property">offset</span><span class="token operator">:</span> <span class="token number">0</span><span class="token punctuation">,</span> <span class="token comment">// é¡µæ•°</span>\n<span class="token punctuation">}</span><span class="token punctuation">)</span>\n</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div>',17),i={href:"https://eggjs.org/zh-cn/tutorials/mysql.html#%E5%A6%82%E4%BD%95%E7%BC%96%E5%86%99-crud-%E8%AF%AD%E5%8F%A5",target:"_blank",rel:"noopener noreferrer"},r={href:"https://www.cnblogs.com/loaderman/p/11571028.html",target:"_blank",rel:"noopener noreferrer"},u=(0,e.Fv)('<h2 id="äº”ã€egg-æ¨¡æ¿æ¸²æŸ“" tabindex="-1"><a class="header-anchor" href="#äº”ã€egg-æ¨¡æ¿æ¸²æŸ“"><span>äº”ã€egg æ¨¡æ¿æ¸²æŸ“</span></a></h2><p>ç»ˆç«¯è¾“å…¥<code>npm i egg-view-ejs</code>å®‰è£…<code>egg-view-ejs</code>;</p><p>é…ç½® plugin</p><div class="language-javascript line-numbers-mode" data-ext="js" data-title="js"><pre class="language-javascript"><code><span class="token comment">// config/plugin.js</span>\nmodule<span class="token punctuation">.</span>exports <span class="token operator">=</span> <span class="token punctuation">{</span>\n  <span class="token literal-property property">ejs</span><span class="token operator">:</span> <span class="token punctuation">{</span>\n    <span class="token literal-property property">enable</span><span class="token operator">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span>\n    <span class="token keyword">package</span><span class="token operator">:</span> <span class="token string">&#39;egg-view-ejs&#39;</span><span class="token punctuation">,</span>\n  <span class="token punctuation">}</span><span class="token punctuation">,</span>\n<span class="token punctuation">}</span>\n</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>è®¾ç½® html æ–‡ä»¶ä»¥ ejs è§£æ</p><div class="language-javascript line-numbers-mode" data-ext="js" data-title="js"><pre class="language-javascript"><code><span class="token comment">// config/config.default.js</span>\n\nconfig<span class="token punctuation">.</span>view <span class="token operator">=</span> <span class="token punctuation">{</span>\n  <span class="token literal-property property">mapping</span><span class="token operator">:</span> <span class="token punctuation">{</span>\n    <span class="token string-property property">&#39;.html&#39;</span><span class="token operator">:</span> <span class="token string">&#39;ejs&#39;</span><span class="token punctuation">,</span>\n  <span class="token punctuation">}</span><span class="token punctuation">,</span>\n<span class="token punctuation">}</span>\n</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>æŒ‡å®šè§£æçš„ html æ–‡ä»¶ï¼Œè¿”å›æ¥å£æ•°æ®</p><div class="language-javascript line-numbers-mode" data-ext="js" data-title="js"><pre class="language-javascript"><code><span class="token comment">// app/controller/home.js</span>\n<span class="token keyword">const</span> Controller <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">&#39;egg&#39;</span><span class="token punctuation">)</span><span class="token punctuation">.</span>Controller\n\n<span class="token keyword">class</span> <span class="token class-name">HomeController</span> <span class="token keyword">extends</span> <span class="token class-name">Controller</span> <span class="token punctuation">{</span>\n  <span class="token keyword">async</span> <span class="token function">index</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>\n    <span class="token keyword">const</span> <span class="token punctuation">{</span> ctx <span class="token punctuation">}</span> <span class="token operator">=</span> <span class="token keyword">this</span>\n    <span class="token keyword">const</span> res <span class="token operator">=</span> <span class="token punctuation">{</span>\n      <span class="token literal-property property">id</span><span class="token operator">:</span> <span class="token number">1559</span><span class="token punctuation">,</span>\n      <span class="token literal-property property">name</span><span class="token operator">:</span> <span class="token string">&#39;tom&#39;</span><span class="token punctuation">,</span>\n      <span class="token literal-property property">age</span><span class="token operator">:</span> <span class="token number">18</span><span class="token punctuation">,</span>\n    <span class="token punctuation">}</span>\n    <span class="token keyword">await</span> ctx<span class="token punctuation">.</span><span class="token function">render</span><span class="token punctuation">(</span><span class="token string">&#39;index.html&#39;</span><span class="token punctuation">,</span> <span class="token punctuation">{</span>\n      res<span class="token punctuation">,</span>\n      <span class="token literal-property property">list</span><span class="token operator">:</span> <span class="token punctuation">[</span><span class="token string">&#39;a&#39;</span><span class="token punctuation">,</span> <span class="token string">&#39;b&#39;</span><span class="token punctuation">,</span> <span class="token string">&#39;c&#39;</span><span class="token punctuation">]</span><span class="token punctuation">,</span>\n    <span class="token punctuation">}</span><span class="token punctuation">)</span>\n  <span class="token punctuation">}</span>\n<span class="token punctuation">}</span>\n\nmodule<span class="token punctuation">.</span>exports <span class="token operator">=</span> HomeController\n</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>html è·å–æ•°æ®ï¼Œæ¸²æŸ“é¡µé¢</p><div class="language-javascript line-numbers-mode" data-ext="js" data-title="js"><pre class="language-javascript"><code><span class="token comment">// app/view/index.html</span>\n<span class="token operator">&lt;</span>p<span class="token operator">&gt;</span>\n  <span class="token literal-property property">id</span><span class="token operator">:</span><span class="token operator">&lt;</span><span class="token operator">%=</span>res<span class="token punctuation">.</span>id<span class="token operator">%</span><span class="token operator">&gt;</span>\n<span class="token operator">&lt;</span><span class="token operator">/</span>p<span class="token operator">&gt;</span>\n<span class="token operator">&lt;</span>ul<span class="token operator">&gt;</span>\n  <span class="token operator">&lt;</span><span class="token operator">%</span><span class="token keyword">for</span><span class="token punctuation">(</span><span class="token keyword">var</span> i<span class="token operator">=</span><span class="token number">0</span><span class="token punctuation">;</span> i<span class="token operator">&lt;</span>list<span class="token punctuation">.</span>length<span class="token punctuation">;</span>i<span class="token operator">++</span><span class="token punctuation">)</span><span class="token punctuation">{</span><span class="token operator">%</span><span class="token operator">&gt;</span>\n    <span class="token operator">&lt;</span>li<span class="token operator">&gt;</span>\n      <span class="token operator">&lt;</span><span class="token operator">%=</span>list<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token operator">%</span><span class="token operator">&gt;</span>\n    <span class="token operator">&lt;</span><span class="token operator">/</span>li<span class="token operator">&gt;</span>\n  <span class="token operator">&lt;</span><span class="token operator">%</span><span class="token punctuation">}</span><span class="token operator">%</span><span class="token operator">&gt;</span>\n<span class="token operator">&lt;</span><span class="token operator">/</span>ul<span class="token operator">&gt;</span>\n</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div>',10),d={},k=(0,a(6262).A)(d,[["render",function(n,s){const a=(0,e.g2)("ExternalLinkIcon");return(0,e.uX)(),(0,e.CE)("div",null,[p,(0,e.Lk)("p",null,[(0,e.eW)("è¿™é‡Œå°±åªè¯´ä¸‹å¸¸ç”¨çš„ç›®å½•ï¼Œç‚¹å‡»"),(0,e.Lk)("a",t,[(0,e.eW)("é“¾æ¥"),(0,e.bF)(a)]),(0,e.eW)("äº†è§£æ›´å¤š")]),o,(0,e.Lk)("p",null,[(0,e.eW)("æ›´å¤šè·¯ç”±çŸ¥è¯†è·³è½¬"),(0,e.Lk)("a",l,[(0,e.eW)("å®˜ç½‘"),(0,e.bF)(a)])]),c,(0,e.Lk)("p",null,[(0,e.Lk)("a",i,[(0,e.eW)("å®˜ç½‘ä¼ é€é—¨"),(0,e.bF)(a)]),(0,e.Lk)("a",r,[(0,e.eW)("åšå®¢å›­ä¼ é€é—¨"),(0,e.bF)(a)])]),u])}]]),v=JSON.parse('{"path":"/blogs/note/backend/eggrumenshouce.html","title":"eggå…¥é—¨æ‰‹å†Œ","lang":"en-US","frontmatter":{"title":"eggå…¥é—¨æ‰‹å†Œ","categories":["note"],"tags":["Egg"],"date":"2020-12-16T00:00:00.000Z"},"headers":[{"level":2,"title":"ä¸€ã€åˆ›å»º egg é¡¹ç›®","slug":"ä¸€ã€åˆ›å»º-egg-é¡¹ç›®","link":"#ä¸€ã€åˆ›å»º-egg-é¡¹ç›®","children":[]},{"level":2,"title":"äºŒã€ç›®å½•ç»“æ„","slug":"äºŒã€ç›®å½•ç»“æ„","link":"#äºŒã€ç›®å½•ç»“æ„","children":[]},{"level":2,"title":"ä¸‰ã€egg ä¸­çš„æ¥å£è·¯ç”±","slug":"ä¸‰ã€egg-ä¸­çš„æ¥å£è·¯ç”±","link":"#ä¸‰ã€egg-ä¸­çš„æ¥å£è·¯ç”±","children":[{"level":3,"title":"1.å®šä¹‰è·¯ç”±","slug":"_1-å®šä¹‰è·¯ç”±","link":"#_1-å®šä¹‰è·¯ç”±","children":[]},{"level":3,"title":"2.è·å–å‚æ•°","slug":"_2-è·å–å‚æ•°","link":"#_2-è·å–å‚æ•°","children":[]}]},{"level":2,"title":"å››ã€æ•°æ®åº“æ“ä½œ","slug":"å››ã€æ•°æ®åº“æ“ä½œ","link":"#å››ã€æ•°æ®åº“æ“ä½œ","children":[{"level":3,"title":"1.é…ç½®æ•°æ®åº“","slug":"_1-é…ç½®æ•°æ®åº“","link":"#_1-é…ç½®æ•°æ®åº“","children":[]},{"level":3,"title":"2.æ•°æ®å¤„ç†","slug":"_2-æ•°æ®å¤„ç†","link":"#_2-æ•°æ®å¤„ç†","children":[]}]},{"level":2,"title":"äº”ã€egg æ¨¡æ¿æ¸²æŸ“","slug":"äº”ã€egg-æ¨¡æ¿æ¸²æŸ“","link":"#äº”ã€egg-æ¨¡æ¿æ¸²æŸ“","children":[]}],"git":{"createdTime":1737108179000,"updatedTime":1737108179000,"contributors":[{"name":"ç¨€é¥­","email":"lixifan@ane56.com","commits":1}]},"filePathRelative":"blogs/note/backend/eggå…¥é—¨æ‰‹å†Œ.md"}')}}]);